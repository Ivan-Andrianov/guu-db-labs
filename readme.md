# Выполнение лабораторных работ по базам данных

### Первоначальные работы
1. Для выполнения лабораторных работ создал скрипты для первоначальной настройки базы данных в директории **/init-scripts**;
2. Для запуска базы данных использовал Docker Compose (файл с конфигурацией в корне проекта **compose.yaml**);
3. Параметры запуска базы данных поместил в файл **db-properties.env**;

### Запуск БД
Для запуска БД используйте команду:  
```bash
docker compose --env-file=db.env up
```
В терминале можно увидеть логи создания объектов DATABASE (к сожалению postgres имеет ограничение длины имени объекта
базы данных, поэтому мы видим, как он обрезает имена в консоли)

### Лабораторная работа №1
**Описание:** В рамках данной лаборатории нужно сделать следующие шаги:
1. Поднять Postgresql в Docker контейнере (что было сделано в разделе 'Запуск БД');
2. Создать указанные объекты DATABASE (что было сделано в разделе 'Запуск БД');
3. Создать указанные таблицы в каждой DATABASE;
4. В таблице 'Вокзалы' показать примеры операций _INSERT_, _SELECT_, _DELETE_, _UPDATE_.


### Лабораторная работа №2
**Задание:** 2.15.1

**Шаги:**
1. Создать роль с возможностью подключения к БД;
2. Зайти под vova в БД;
3. Протестировать, что vova не может создавать другие роли;

**Скрипты:**
```postgresql
CREATE ROLE vova LOGIN password '123';
```
```postgresql
CREATE ROLE test;
```
![img.png](images/img.png)


**Задание:** 2.15.2

**Шаги:**
1. Создать пользовательскую роль;
2. Добавить пользовательскую роль в группу;
3. Зайти под пользовательской ролью;
4. Продемонстрировать возможность роли становиться групповой ролью и возможности от имени групповой роли.

**Скрипты:**
```postgresql
-- Создание групповой роли
CREATE ROLE reader NOLOGIN CREATEROLE;
-- Создание роли пользователя
CREATE ROLE aleksey LOGIN NOINHERIT PASSWORD '123';
-- Добавляем Алексея в группу reader
GRANT reader TO aleksey;
```
![img_1.png](images/img_1.png)

```postgresql
-- Алексей безуспешно создает роль
CREATE ROLE sergey;
```
![img_2.png](images/img_2.png)

```postgresql
-- Алексей приобретает групповую роль
SET ROLE reader;
CREATE ROLE sergey;
```
![img_3.png](images/img_3.png)
